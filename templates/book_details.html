<!DOCTYPE html>
{% load static %}

<html lang="en">
<<<<<<< Updated upstream

<head>
   <!-- basic -->
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <!-- mobile metas -->
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <meta name="viewport" content="initial-scale=1, maximum-scale=1">
   <!-- site metas -->
   <title>memorial books</title>
   <meta name="keywords" content="">
   <meta name="description" content="">
   <meta name="author" content="">
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
   <!-- bootstrap css -->
   <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
   <!-- style css -->
   <link rel="stylesheet" href="{% static 'css/style.css'%}">
   <!-- Responsive-->
   <link rel="stylesheet" href="{% static 'css/responsive.css'%}">
   <!-- fevicon -->
   <link rel="icon" href="{% static 'images/fevicon.png'%}" type="image/gif" />
   <!-- Scrollbar Custom CSS -->
   <link rel="stylesheet" href=" {% static 'css/jquery.mCustomScrollbar.min.css'%}">

</head>

<body>
   <header>
      <!-- header inner -->
      <div class="header">
         <div class="container">
            <div class="row">
               <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col logo_section">
                  <div class="full">
                     <div class="center-desk">
                        <div class="logo"> <a href="/"><img src=" {% static 'images/logo.png'%}" alt="#"></a> </div>
                     </div>
                  </div>
               </div>
               <div class="col-xl-9 col-lg-9 col-md-9 col-sm-9">
                  <div class="menu-area">
                     <div class="limit-box">
                        <nav class="main-menu">
                           <ul class="menu-area-main">
                              <li><a href="/">Home</a></li>
                              <li> <a href="/about">About us</a> </li>
                              <li class="active"><a href="/book/">Our Books</a></li>
                              <li><a href="/signin">Sign In</a></li>
                              <li><a href="/signup">Sign Up</a></li>
                              <a href="{% url 'view_cart' %}">Panier</a>
                              <li class="mean-last"> <a href="#"><img src=" {% static 'images/top-icon.png'%}"
                                       alt="#" /></a> </li>
                           </ul>
                        </nav>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
      </div>
   </header>
   <div class="container d-flex justify-content-center">
      <div class="card col-md-6"> <img src="{{ book.Image_URL_L }}" class="card-img-top " alt="{{ book.Title }}">
         <div class="card-body text-center">
            <h5 class="card-title">{{ book.Title }}</h5>
            <p class="card-text"><strong>Author:</strong> {{ book.Author }}</p>
            <p class="card-text mt-4"><strong>Rating:</strong> {{ book.Rating }} / 10</p>
            <form action="{% url 'add_to_cart' book.id %}" method="post">
               {% csrf_token %}
               <button type="submit" class="btn btn-primary">Ajouter au panier</button>
            </form>

         </div>
      </div>
   </div>

   <script src=" {% static 'js/jquery.min.'%}"></script>
   <script src=" {% static 'js/popper.min.js'%}"></script>
   <script src=" {% static 'js/bootstrap.bundle.min.js'%}"></script>
   <script src=" {% static 'js/jquery-3.0.0.min.js'%}"></script>
   <script src=" {% static 'js/plugin.js'%}"></script>
   <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
   <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
   <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
   <script src=" {% static 'js/jquery.mCustomScrollbar.concat.min.js'%}"></script>
   <script src=" {% static 'js/custom.js'%}"></script>
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"></script>
=======
    <head>
        <!-- basic -->
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <!-- mobile metas -->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="viewport" content="initial-scale=1, maximum-scale=1">
        <!-- site metas -->
        <title>memorial books</title>
        <meta name="keywords" content="">
        <meta name="description" content="">
        <meta name="author" content="">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <!-- bootstrap css -->
        <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
        <!-- style css -->
        <link rel="stylesheet" href="{% static 'css/style.css'%}">
        <!-- Responsive-->
        <link rel="stylesheet" href="{% static 'css/responsive.css'%}">
        <!-- fevicon -->
        <link rel="icon" href="{% static 'images/fevicon.png'%}" type="image/gif" />
        <!-- Scrollbar Custom CSS -->
        <link rel="stylesheet" href=" {% static 'css/jquery.mCustomScrollbar.min.css'%}">
        
     </head>
<body class="w-100">
    <header>
        
        <div class="header">
           <div class="container">
              <div class="row">
                 <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col logo_section">
                    <div class="full">
                       <div class="center-desk">
                          <div class="logo"> <a href="/"><img src=" {% static 'images/logo.png'%}" alt="#"></a> </div>
                       </div>
                    </div>
                 </div>
                 <div class="col-xl-9 col-lg-9 col-md-9 col-sm-9">
                    <div class="menu-area">
                       <div class="limit-box">
                          <nav class="main-menu">
                             <ul class="menu-area-main">
                                <li ><a href="/">Home</a></li>
                                <li> <a href="/about">About us</a> </li>
                                <li class="active"><a href="/book/">Our Books</a></li>
                                {% if user.is_authenticated %}
                                 <li><a class="" href="/logout/">Logout</a></li>
                                 <li> <a class="" href="/book/cart/">Cart</a></li>
                                 <li>{{user.username}}</li>                                 
                                 
                               {% else %}
                               <li><a class="" href="/signup">Signup</a></li>
                                 <li><a class="" href="/signin">Login</a></li>
                             {% endif %}
                             </ul>
                          </nav>
                       </div>
                    </div>
                 </div>
              </div>
           </div>
        </div>
        </div>
     </header>
     <div class="container d-flex justify-content-center">
      <div class="card col-md-6">  <img src="{{ book.Image_URL_L }}" class="card-img-top " alt="{{ book.Title }}">
        <div class="card-body text-center">
          <h5 class="card-title">{{ book.Title }}</h5>
          <p class="card-text"><strong>Author:</strong> {{ book.Author }}</p>
          <p class="card-text mt-4"><strong>Rating:</strong> {{ book.Rating }} / 10</p>
          <button value="{{book.id}}" type="button" class="btn btn-primary bg-cart"><i class="fa fa-cart-plus mr-2"></i> Add to cart</button>

        </div>
      </div>
    </div>
    <h1 class="text-center">You Might Be Interested In These Books</h1>
    <div class="row equal-height-row">
    {% for book in suggested_books %}
<div class="col-md-3 col-sm-2 col-4 mb-4 equal-height-col w-100">
    <a href="{% url 'book_details' book_id=book.pk %}"> <!-- Link to book detail page -->
        <div class="card h-100">
            <img src="{{ book.Image_URL_L }}" class="card-img-top" alt="{{ book.Title }} Cover">
            <div class="card-body text-center">
                <h5 class="card-title">{{ book.Title }}</h5>
                <p class="card-text"><strong>Author:</strong> {{ book.Author }}</p>
                <p class="card-text mt-4"><strong>Rating:</strong> {{ book.Rating }} / 10</p>
            </div>
        </div>
    </a>
</div>
{% endfor %}
</div>
<script>
   function getCookie(name) {
let cookieValue = null;
if (document.cookie && document.cookie !== '') {
   const cookies = document.cookie.split(';');
   for (let i = 0; i < cookies.length; i++) {
       const cookie = cookies[i].trim();
       if (cookie.substring(0, name.length + 1) === (name + '=')) {
           cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
           break;
       }
   }
}
return cookieValue;
}
const csrftoken = getCookie('csrftoken');


let btns=document.querySelectorAll(".btn")
btns.forEach(btn => {
btn.addEventListener("click",addToCart)
});
function addToCart(e) {
let item_id = e.target.value;
let url = "/book/addtocart/";
let data = { id: item_id };

fetch(url, {
method: "POST",
headers: {"Content-Type":"application/json", 'X-CSRFToken': csrftoken},
body: JSON.stringify(data)
})
.then(res=>res.json())
.then(data=>{
console.log(data)
})

}

</script>
     <script src=" {% static 'js/jquery.min.'%}"></script>
     <script src=" {% static 'js/popper.min.js'%}"></script>
     <script src=" {% static 'js/bootstrap.bundle.min.js'%}"></script>
     <script src=" {% static 'js/jquery-3.0.0.min.js'%}"></script>
     <script src=" {% static 'js/plugin.js'%}"></script>
     <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
     <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>      <script src=" {% static 'js/jquery.mCustomScrollbar.concat.min.js'%}"></script>
     <script src=" {% static 'js/custom.js'%}"></script>
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
>>>>>>> Stashed changes
</body>

</html>